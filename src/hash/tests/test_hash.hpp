#ifndef TEST_HASH_HPP
#define TEST_HASH_HPP

#include <cassert>

#include "hash/hash.hpp"

void test_affinity() {
    static constexpr long expected[] = {
        1426900586102792192L,
        -2785742964593462515L,
        1275196294377204054L,
        -4577980259969234875L,
        -9026677410217451501L,
        -4084466571723407682L,
        6858400867323190981L,
        6421400116971444000L,
        3117644862847955803L,
        3209652015512825247L,
        -3972547966715039226L,
        7161406285905018133L,
        -8532376245443450369L,
        7241075945561753903L,
        -5132497970928520610L,
        -2384168716132680389L,
        8307731923131423891L,
        1973406810353280605L,
        -6558432060531747342L,
        -2641749364992328114L,
        -4679991203385121741L,
        -8311150356493741507L,
        8429163587973296338L,
        64277846221623424L,
        8841334001487580573L,
        -182403735265674421L,
        -6407484765667812407L,
        7534695911809031223L,
        -5866395501337214734L,
        8557072764815734018L,
        4602885685250685120L,
        -578340967583654273L,
        -3143590534132397385L,
        -3757136758038244958L,
        -3352569454828362164L,
        -4012182573601107127L,
        -1515478668073702898L,
        241686782053306458L,
        -8236668585507237036L,
        7902497401603252029L,
        -4155575200795449068L,
        -2209107308233434709L,
        3997064504299820136L,
        -6324439063013572357L,
        4379085023826192081L,
        4914839672201994211L,
        3463126146491192617L,
        3378261447700973435L,
        2272383144869939092L,
        3951248609533570916L,
        -1104553633715622689L,
        6061152491389345911L,
        -5706659885933707620L,
        -8015360880995489306L,
        7791071298741959870L,
        374994830332687421L,
        8370872184430657872L,
        -235575016515372558L,
        -8383641031565296339L,
        2391055811879534980L,
        8633297058295171728L,
        6573550159719416343L,
        -5299643820842712017L,
        -8106638782855370185L,
        7847456434171611231L,
        -3865792414457258249L,
        7691031188611698784L,
        -2894464358299785662L,
        8307929773959929163L,
        -1487916162400513673L,
        -4477283126022596610L,
        6614235796240398542L,
        6346337254259765553L,
        -548738443200398208L,
        1526909021869764145L,
        2404998018028244416L,
        -4690766127432059150L,
        5867580323059608211L,
        5246280483690946263L,
        2923566232245610782L,
        1898872730557523930L,
        624254317299970694L,
        -5218261022256003468L,
        -7787733183756331815L,
        -5754061207183658634L,
        6875327376676731516L,
        -1097284667286858075L,
        -6044855920764857390L,
        -5625496925071806237L,
        -8987012076242665854L,
        -1286226559950436192L,
        8772178830351953611L,
        -3781162099889875797L,
        1396078460937419741L,
        -3572332534363664915L,
        8182617732874272971L,
        8828794871651103516L,
        -6218897685408442661L,
        5763746066212453802L,
        -5975582076058767463L,
        -950926739671560393L,
        -5482028839770632062L,
        -211259842709601528L,
        -7903506987076694263L,
        8010255721068513841L,
        -5361502983135298645L,
        2871313502601833135L,
        239224132395688182L,
        6938689290044792305L,
        -3868032160446277856L,
        8831778785042894878L,
        4785853437372732812L,
        -9202143519739392160L,
        5825141887312886183L,
        7369880451745693934L,
        -3822126110415902464L,
        -762100356431825834L,
        -1835710990873264405L,
        -7056441017747730602L,
        1465977596700748122L,
        -1418636403015935959L
    };

    const long *p = &expected[0];
    for (int i = -5; i <= 5; ++i) {
        for (int j = -5; j <= 5; ++j) {
            assert(*p == hash::affinity(i, j));
            ++p;
        }
    }
}

#endif
